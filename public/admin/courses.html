<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../boostrap/bootstrap.min.css" />
    <title>Admin dashboard</title>

    <style>
      tbody .btn-outline-info {
        display: none;
      }
    </style>
  </head>

  <body>
    <div class="container-fluid">
      <div class="row flex-nowrap">
        <div class="col-auto col-md-3 col-xl-2 px-sm-2 px-0 bg-light">
          <div
            class="d-flex flex-column align-items-center align-items-sm-start px-3 pt-2 text-white min-vh-100"
          >
            <span class="navbar-brand text-body pb-4">
              <span class="fs-5 d-none d-sm-inline">Admin dashboard</span>
            </span>

            <ul
              class="nav nav-pills flex-column mb-sm-auto mb-0"
              id="menu"
            >
              <li class="nav-item" role="presentation">
                <a
                  class="nav-link active"
                  id="ex1-tab-1"
                  data-bs-toggle="tab"
                  href="#ex1-tabs-1"
                  role="tab"
                  aria-controls="ex1-tabs-1"
                  aria-selected="true"
                  >Subjects</a
                >
              </li>
              <li class="nav-item" role="presentation">
                <a
                  class="nav-link"
                  id="ex1-tab-2"
                  data-bs-toggle="tab"
                  href="#ex1-tabs-2"
                  role="tab"
                  aria-controls="ex1-tabs-2"
                  aria-selected="false"
                  >Faculty</a
                >
              </li>
              <li class="nav-item" role="presentation">
                <a
                  class="nav-link"
                  id="ex1-tab-3"
                  data-bs-toggle="tab"
                  href="#ex1-tabs-3"
                  role="tab"
                  aria-controls="ex1-tabs-3"
                  aria-selected="false"
                  >Students</a
                >
              </li>
              <li class="nav-item" role="presentation">
                <a
                  class="nav-link"
                  id="ex1-tab-4"
                  data-bs-toggle="tab"
                  href="#ex1-tabs-4"
                  role="tab"
                  aria-controls="ex1-tabs-4"
                  aria-selected="false"
                  >Fee</a
                >
              </li>
            </ul>
            <hr />
            <button class="btn btn-outline-primary">Logout</button>
          </div>
        </div>
        <div class="col px-0">
          <header>
            <div id="course-info" class="py-2">
              <h3 id="name" class="ms-3">Masters of Computer Applications</h3>
              <h5 id="shortName" class="ms-3 navbar-brand">MCA</h5>
              <p id="description" class="ms-3 text-muted">
                Showing faculties in a course: Explore the exceptional faculty
                members who bring expertise and passion to a specific course.
              </p>
            </div>
          </header>
          <section>
            <div class="toast-container position-fixed top-0 end-0 p-3"></div>
            <div class="tab-content p-3" id="ex1-content">
              <div
                class="tab-pane fade show active"
                id="ex1-tabs-1"
                role="tabpanel"
                aria-labelledby="ex1-tab-1"
              >
                <button
                  class="btn-outline-primary btn mb-3"
                  data-bs-toggle="modal"
                  data-bs-target="#subjectsModal"
                >
                  Add new subject
                </button>

                <div class="table-responsive table-bordered">
                  <table class="table">
                    <thead class="table-info">
                      <tr>
                        <th scope="col">Subject ID</th>
                        <th scope="col">Subject Name</th>
                        <th scope="col">Semester</th>
                        <th scope="col"></th>
                      </tr>
                    </thead>
                    <tbody id="subjects-host"></tbody>
                  </table>
                </div>
              </div>
              <div
                class="tab-pane fade"
                id="ex1-tabs-2"
                role="tabpanel"
                aria-labelledby="ex1-tab-2"
              >
                <a class="btn-outline-primary btn mb-3" id="new-fa-a">
                  Add new faculty
                </a>

                <div class="table-responsive table-bordered">
                  <table class="table">
                    <thead class="table-info">
                      <tr>
                        <th scope="col">Joining date</th>
                        <th scope="col">First name</th>
                        <th scope="col">Last name</th>
                        <th scope="col">Course</th>
                        <th scope="col">City</th>
                        <th scope="col">Mobile number</th>
                        <th scope="col">Email</th>
                        <th scope="col"></th>
                      </tr>
                    </thead>
                    <tbody id="faculties-host"></tbody>
                  </table>
                </div>
              </div>
              <div
                class="tab-pane fade"
                id="ex1-tabs-3"
                role="tabpanel"
                aria-labelledby="ex1-tab-3"
              >
                <a class="btn-outline-primary btn mb-3" id="new-stu-a">
                  Add new Student
                </a>

                <div class="table-responsive table-bordered">
                  <table class="table">
                    <thead class="table-info p-3">
                      <tr>
                        <th scope="col">Admission number</th>
                        <th scope="col">Joining date</th>
                        <th scope="col">Roll number</th>
                        <th scope="col">First name</th>
                        <th scope="col">Last name</th>
                        <th scope="col">Course</th>
                        <th scope="col">City</th>
                        <th scope="col">Mobile number</th>
                        <th scope="col">Email</th>
                        <th scope="col"></th>
                      </tr>
                    </thead>
                    <tbody id="students-host"></tbody>
                  </table>
                </div>
              </div>
              <div
                class="tab-pane fade"
                id="ex1-tabs-4"
                role="tabpanel"
                aria-labelledby="ex1-tab-4"
              >
                <h5 class="py-1">Course fee for different academic years</h5>

                <div class="table-responsive table-bordered">
                  <table class="table">
                    <thead class="table-info p-3">
                      <tr>
                        <th scope="col">Academic Year</th>
                        <th scope="col">Amount</th>
                      </tr>
                    </thead>
                    <tbody id="course-fee-table"></tbody>
                  </table>
                </div>

                <h5>All student transactions</h5>

                <button
                  class="btn-outline-primary btn mb-3"
                  data-bs-toggle="modal"
                  data-bs-target="#student-fee-modal"
                >
                  Add new Student fee transaction
                </button>

                <div class="table-responsive table-bordered">
                  <table class="table">
                    <thead class="table-info p-3">
                      <tr>
                        <th scope="col">Admission Number</th>
                        <th scope="col">Student name</th>
                        <th scope="col">Amount</th>
                        <th scope="col">Paid date</th>
                        <th scope="col">Semester</th>
                        <th scope="col">Academic year</th>
                        <th scope="Transaction id">Transaction id</th>
                      </tr>
                    </thead>
                    <tbody id="student-fee-table"></tbody>
                  </table>
                </div>
              </div>
            </div>
          </section>
        </div>
      </div>
    </div>

    <script src="../boostrap/bootstrap.min.js"></script>
    <script src="../util.js"></script>
    <script src="../forms.js"></script>
    <script src="../rest.js"></script>
    <script src="../admin/forms.js"></script>
    <script src="/admin/courses.js"></script>
    <script>
      
      document.body.append(
        createModal(
          "subjectsModal",
          "Add new subject",
          SubjectForm("handleForm(event, 'subjects')").outerHTML
        )
      );

      document.body.append(
        createModal(
          "student-fee-modal",
          "Student fee form",
          studentFeeForm.outerHTML
        )
      );
      const subjectsModal = new bootstrap.Modal("#subjectsModal");
      const studentFeeModal = new bootstrap.Modal("#student-fee-modal");


      function handleForm(event, type) {
        event.preventDefault();
        const form = event.target;

        if (!form.checkValidity()) {
          event.stopPropagation();
          form.classList.add("was-validated");
        } else {
          handlePost(type, form);
        }
      }
      
    </script>
  </body>
</html>
